#!/usr/bin/env bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

SYSTEM="$( uname )"

cd $DIR


git submodule sync >> /dev/null
git submodule init >> /dev/null
git submodule update >> /dev/null
git submodule foreach git pull origin master >> /dev/null
git submodule foreach git submodule init >> /dev/null
git submodule foreach git submodule update >> /dev/null



FONTS=$DIR/fonts/SourceCodePro

if [ $SYSTEM = "Darwin" ]; then
    LOCAL_FONTS="$HOME/Library/Fonts"
else
    LOCAL_FONTS="$HOME/.fonts"
    mkdir -o "$LOCAL_FONTS"
fi

for FONT in $FONTS/*.otf
do
    cp "$FONT" "$LOCAL_FONTS"
done

if [ $SYSTEM != "Darwin" ]; then
    fc-cache -f -v
fi


mkdir -p "$HOME/.antigen"

ln -sf "$DIR/zsh/antigen/antigen.zsh" "$HOME/.antigen/antigen.zsh"
ln -sf "$DIR/base16-shell" "$HOME/.base16-shell"
ln -sf "$DIR/zsh/zshrc" "$HOME/.zshrc"
